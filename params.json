{"name":"Openacc-hackathon-gpu-profiling","tagline":"GPU Profiling Examples for the OpenACC Hackathon","body":"OpenACC Hackathon - GPU Profiling Examples\r\n==========================================\r\nGathering Profile Data on a Cray XK7\r\n------------------------------------\r\nTwo scripts have been provided in the `scripts` directory to simplify gathering\r\nGPU profile data on the XK7. It is generally best to visualize this data on\r\nyour local machine using the NVIDIA CUDA Visual Profiler, which comes with the\r\nCUDA Toolkit. You do not need to have a CUDA-enabled GPU to use the Visual\r\nProfiler, but you will have to download the CUDA Toolkit in order to get it.\r\n\r\n### Gathering a Timeline ###\r\nThe `nvprof_timeline.sh` script can be used to gather a GPU timeline of your\r\napplication. Because of the way that Cray's aprun command launches executables\r\nyou must set the `PMI_NO_FORK` environment variable to `1` in your run script.\r\nThen simply add `nvprof_timeline.sh` to your run command immediately before the\r\nexecutable. This will give 1 timeline file for each node of your run. Since\r\nmost applications behave similarly on each node, you may choose to only profile\r\n1 process. As an example, if I wanted to profile only the final node of a 16\r\nnode run, I would use the following command:\r\n\r\n    aprun -n 15 -N 1 ./a.out : -n 1 -N 1 ./nvprof_timeline.sh ./a.out\r\n\r\n### Gathering Metrics for Analysis ###\r\nAdditionally you may wish to gather detailed information about each kernel.\r\nThis can be done by running a second time with the `nvprof_metrics.sh` script.\r\nThis adds a significant amount of overhead to the run, so it should only be\r\ndone on runs that last only a few seconds.\r\n\r\n## Importing into Visual Profiler ##\r\nAlthough Visual Profiler is available as a part of the cudatoolkit module on\r\nthe Cray XK7 running CUDA Visual Profiler from your local machine. In order to\r\nload the nvprof output into Visual Profiler, use the `File -> Import` option\r\nand select an nvprof file as the type, then select your file. You should not\r\nneed to change any other options. \r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}